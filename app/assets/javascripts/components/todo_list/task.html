<div ng-style="$ctrl.listStyle">
  <div class="task-row no-word-break">
    <a class="extended-control" ng-show="$ctrl.allowExtend" ng-if="$ctrl.task.extended" ng-click="$ctrl.retractChildren()">&lsqb;&minus;&rsqb;</a>
    <a class="extended-control" ng-show="$ctrl.allowExtend" ng-if="!$ctrl.task.extended" ng-click="$ctrl.extendChildren()">&lsqb;&plus;&rsqb;</a>
    <i ng-show="$ctrl.allowReorder" class="fa fa-bars reorder-icon"></i>
    <button type='button' class="btn btn-circle" ng-class="$ctrl.starredClass()" ng-click="$ctrl.toggleStarred()">
      <i class="fa fa-star"></i>
    </button>
    <button ng-disabled='$ctrl.disablePrimaryButton()' type='button' class="btn btn-blue btn-circle" ng-click="$ctrl.primaryButtonClick($ctrl.task)">
      <i class="fa" ng-class="$ctrl.primaryButtonIcon()"></i>
    </button>
    <button ng-show="$ctrl.allowChildAddition()" type="button" class="hidden-task-link btn btn-green btn-circle" ng-click="$ctrl.toggleForm()">
      <i class="fa fa-plus"></i>
    </button>
    <a ng-href="/tasks/{{$ctrl.task.id}}" ng-style="$ctrl.taskLinkStyle">
      <span class="item-title" ng-class="{'completed': $ctrl.task.state=='completed'}">{{ $ctrl.task.label }}</span>
    </a>
  </div>

  <task-list top-level="false" ng-show="$ctrl.task.extended && $ctrl.showChildren" parent-task="$ctrl.task" tasks="$ctrl.task.children" background-color="$ctrl.backgroundColor"></task-list>
</div>
